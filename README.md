# go-goa

[![Go Report Card](https://goreportcard.com/badge/github.com/hiromaily/go-goa)](https://goreportcard.com/report/github.com/hiromaily/go-goa)
[![codebeat badge](https://codebeat.co/badges/f2ee2ed0-5588-46f9-a47e-d50633a06739)](https://codebeat.co/projects/github-com-hiromaily-go-goa-master)
[![Codacy Badge](https://api.codacy.com/project/badge/Grade/f207ca57e48e456389341fc41bb06951)](https://www.codacy.com/app/hiromaily2/go-goa?utm_source=github.com&amp;utm_medium=referral&amp;utm_content=hiromaily/go-goa&amp;utm_campaign=Badge_Grade)
[![MIT License](http://img.shields.io/badge/license-MIT-blue.svg?style=flat)](https://raw.githubusercontent.com/hiromaily/go-goa/master/LICENSE)

`go-goa` is example of [goa](https://github.com/goadesign/goa) framework for v3.  

## Current status
This project has started since 2017 to study Golang and code is quite messy.
Now it's under refactoring.


## Refactoring
- [ ] Clean up everything
- [ ] Integrate to Firebase
- [ ] Switch CI from travisci to github action
- [ ] Rebuild front-end by latest React or Svelte


## Directory Structure
| Directory Name | Description                                           |
|:---------------|:------------------------------------------------------|
| docs(assets)   | assets for front-end                                  |
| build          | docker/gcp configuration files                        |
| cmd            | main.go for cli/server                                |
| config         | toml configuration files                              |
| internal       | goa design files, generated files as separated module |
| pkg            | go files                                              |
| scripts        | shell script                                          |
| web            | developmental environment for front-end               |

### pkg directory
| Directory Name | Description                                    |
|:---------------|:-----------------------------------------------|
| config         | config pkg to read toml file                   |
| encryption     | encryption for hash                            |
| goa            | goa logic based on generated file by `goa gen` |
| jwts           | jwt                                            |
| logger         | logger using `rs/zerolog`                      |
| model          | auto generated by `sqlboiler`                  |
| mysql          | mysql                                          |
| repository     | database operation                             |


## Install goa
```
go install goa.design/goa/v3/cmd/goa@v3
go install google.golang.org/protobuf/cmd/protoc-gen-go@latest
go install google.golang.org/grpc/cmd/protoc-gen-go-grpc@latest
```


## Development process
- `cd internal/goa/service/resume`
- modify `design` files
- generate files by `goa gen`


## API List (outdated)
* ctrl=Health action=Health route=GET /api/_ah/health
* ctrl=Public files=goa/swagger/swagger.json route=GET /swagger.json
* ctrl=Public files=public/ route=GET /*filepath
* ctrl=Public files=resources/swagger-ui/dist/ route=GET /swagger-ui/*filepath
* ctrl=Public files=public/index.html route=GET /
* ctrl=Public files=resources/swagger-ui/dist/index.html route=GET /swagger-ui/
* ctrl=Auth action=Login route=POST /api/auth/login
* ctrl=HyUser action=CreateUser route=POST /api/user security=jwt
* ctrl=HyUser action=DeleteUser route=DELETE /api/user/:userID security=jwt
* ctrl=HyUser action=GetUser route=GET /api/user/:userID security=jwt
* ctrl=HyUser action=UpdateUser route=PUT /api/user/:userID security=jwt
* ctrl=HyUser action=UserList route=GET /api/user security=jwt
* ctrl=HyCompany action=CompanyList route=GET /api/company security=jwt
* ctrl=HyCompany action=CreateCompany route=POST /api/company security=jwt
* ctrl=HyCompany action=DeleteCompany route=DELETE /api/company/:companyID security=jwt
* ctrl=HyCompany action=GetCompanyGroup route=GET /api/company/:companyID security=jwt
* ctrl=HyCompany action=UpdateCompany route=PUT /api/company/:companyID security=jwt
* ctrl=HyCompanybranch action=CreateCompanyBranch route=POST /api/company/branch/:ID security=jwt
* ctrl=HyCompanybranch action=DeleteCompanyBranch route=DELETE /api/company/branch/:ID security=jwt
* ctrl=HyCompanybranch action=GetCompanyBranch route=GET /api/company/branch/:ID security=jwt
* ctrl=HyCompanybranch action=UpdateCompanyBranch route=PUT /api/company/branch/:ID security=jwt


## Performance
To eveluate performance, [hey](https://github.com/rakyll/hey) has been used.
Execute `Make bench`

```
# March 12 2017
hey -n 20000 -c 50 -m GET http://localhost:8080/api/user

Summary:
  Total:	4.1092 secs
  Slowest:	0.0939 secs
  Fastest:	0.0002 secs
  Average:	0.0101 secs
  Requests/sec:	4867.1221
  Total data:	60000 bytes
  Size/request:	3 bytes

Status code distribution:
  [200]	20000 responses
```

## Licence
[MIT](https://github.com/hiromaily/go-goa/blob/master/LICENSE)

## Author
[hiromaily](https://github.com/hiromaily)
